!function(t){FormhybridPlugins={init:function(t){},scrollToMessages:function(e){if("toggleSubpalette"==e)return!1;var r=t(".formhybrid:first").not(".noscroll").parent(['class^="mod_"']).find(":input.alert:first, :input.error:first, .alert-success:first, .alter-danger:first, p.alert:first, fieldset.error:first");if(r.length>0){var a=r.offset();t("html,body").animate({scrollTop:parseInt(a.top)},500)}}},FormhybridAjaxRequest={registerEvents:function(){this.asyncSubmit()},asyncSubmit:function(){t(".formhybrid").on("submit","form[data-async]",function(e){var r=t(this),a=r.serializeArray();e.preventDefault(),a.push({name:"action",value:"asyncFormSubmit"},{name:"load",value:!0}),t.ajax({url:r.attr("action"),data:a,method:t(this).attr("method"),success:function(e){var a,e="<div>"+e+"</div>";r.data("replace")?(a=t(e).find(r.data("replace")),void 0!==a&&t(r.data("replace")).html(a)):(a=t(e).find("#"+r.attr("id")),a.length<1?(r.html(e),a=e):r.replaceWith(a));var i=a.find(".alert:first, .error:first");if(i.length>0){var n=i.offset();t("html,body").animate({scrollTop:parseInt(n.top)-70+"px"},500)}}})})},toggleSubpalette:function(e,r,a){e.blur();var i=t(e),n=t("#"+r),o=t(e).closest("form");return n.length>0?void t.ajax({type:"post",url:location.href,data:{action:"toggleSubpalette",id:r,field:a,state:0,REQUEST_TOKEN:Formhybrid.request_token,FORM_SUBMIT:o.find("input[name=FORM_SUBMIT]").val()},success:function(){n.remove()}}):void t.ajax({type:"post",url:location.href,dataType:"html",data:{action:"toggleSubpalette",id:r,field:a,load:1,state:1,REQUEST_TOKEN:Formhybrid.request_token,FORM_SUBMIT:o.find("input[name=FORM_SUBMIT]").val()},success:function(t,e,r){i.closest("form").find("."+a).length>0?i.closest("form").find("."+a).eq(0).after(t):i.closest("#ctrl_"+a).after(t),"function"==typeof Bootstrapper.initDateTimePicker&&Bootstrapper.initDateTimePicker()}})}};var e={getParameterByName:function(t,e){var r,a,i=decodeURIComponent(e),n=i.split("&");for(a=0;a<n.length;a++)if(r=n[a].split("="),r[0]===t)return void 0===r[1]?!0:r[1]}};t(document).ready(function(){FormhybridAjaxRequest.registerEvents(),FormhybridPlugins.init()}),t(document).ajaxComplete(function(t,r,a){FormhybridPlugins.init(e.getParameterByName("action",a.data))})}(jQuery);